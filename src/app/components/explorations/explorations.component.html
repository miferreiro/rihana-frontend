<!--
  ~ RIHANA Frontend
  ~
  ~ Copyright (C) 2021 David A. Ruano Ordás, José Ramón Méndez Reboredo,
  ~ Miguel Ferreiro Díaz
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public
  ~ License along with this program.  If not, see
  ~ <http://www.gnu.org/licenses/gpl-3.0.html>.
-->

<div class="container pt-4 pb-4">
	<div class="row summary mt-2 mb-3 text-center">
		<h2>{{'Signs detected' | translate}}</h2>
		<div class="col-6">
			<app-pie-chart
				[updateChart]="updateChart.asObservable()">
			</app-pie-chart>
		</div>
		<div class="col-6">
			<app-bar-chart
				[updateChart]="updateChart.asObservable()">
			</app-bar-chart>
		</div>
	</div>

	<h2 class="text-center m-4">{{'Latest explorations' | translate}}</h2>

	<div class="row">
		<div class="col">
			<button type="button" class="input-group-text btn btn-success" routerLink="/exploration">
				<i class="bi bi-plus-lg me-3"></i> {{'Add exploration' | translate}}
			</button>
		</div>
		<form action="" class="col">
			<div class="input-group mb-3">
				<input type="text" class="form-control" placeholder="{{'Search' | translate}}...">
				<button type="submit" class="input-group-text btn btn-success"><i class="bi bi-search me-3"></i> {{'Search' | translate}}</button>
			</div>
		</form>
	</div>
	<div class="row table-responsive">
		<table class="table text-center align-middle">
			<thead>
				<tr>
					<th scope="col">{{'Title' | translate}}</th>
					<th scope="col">{{'Date' | translate}}</th>
					<th scope="col">{{'Options' | translate}}</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let exploration of explorations; let i=index">
					<td>{{exploration.title}}</td>
					<td>{{exploration.explorationDate | date:'dd/MM/yyyy'}}</td>
					<td>
						<div class="btn-group" role="group" aria-label="Basic example">
							<button class="btn"><i class="bi bi-pencil-square"></i></button>
							<button class="btn"><i class="bi bi-info-lg"></i></button>
							<button class="btn" (click)="remove(exploration.id)"><i class="bi bi-trash" style="color: black;"></i></button>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
		<div *ngIf="pageSize != paginationTotalItems" class ="row text-center">
			<ul class="pagination justify-content-center">
				<li class="page-item" [ngClass]="{'disabled': 1 > (currentPage - 1)}">
					<a class="page-link" aria-label="Previous" (click)="handlePageChange(currentPage - 1)">
						<span aria-hidden="true">&lt;</span>
					</a>
				</li>
				<li *ngIf="currentPage != 1" class="page-item" [ngClass]="{'disabled': 1 > (currentPage - 1)}">
					<a class="page-link" (click)="handlePageChange(currentPage - 1)">
						{{currentPage - 1}}
					</a>
				</li>
				<li class="page-item">
					<a class="page-link" (click)="handlePageChange(currentPage)">
						{{currentPage}}
					</a>
				</li>
				<li *ngIf="lastPage > currentPage" class="page-item" [ngClass]="{'disabled': (currentPage + 1) > lastPage}">
					<a class="page-link" (click)="handlePageChange(currentPage + 1)">
						{{currentPage + 1}}
					</a>
				</li>
				<li class="page-item" [ngClass]="{'disabled': (currentPage + 1) > lastPage}">
					<a class="page-link" aria-label="Next" (click)="handlePageChange(currentPage + 1)">
						<span aria-hidden="true">&gt;</span>
					</a>
				</li>
			</ul>
		</div>
	</div>
</div>

<app-delete-confirmation [(open)]="deletingExploration" [modelName]="'exploration'" [id]="exploration.id"
                         [name]="exploration.title"
                         (cancel)="cancel()" (confirm)="delete($event)">
</app-delete-confirmation>

<simple-notifications></simple-notifications>