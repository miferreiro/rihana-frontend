
<!--
  ~ RIHANA Frontend
  ~
  ~ Copyright (C) 2021 David A. Ruano Ordás, José Ramón Méndez Reboredo,
  ~ Miguel Ferreiro Díaz
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public
  ~ License along with this program.  If not, see
  ~ <http://www.gnu.org/licenses/gpl-3.0.html>.
-->

<ng-template [ngIf]="typeExploration === 'PA'">
	<h3 class="text-center fw-bold">{{'Postero-anterior radiography (PA)' | translate}}</h3>
</ng-template>
<ng-template #PP [ngIf]="typeExploration === 'PP'">
	<h3 class="text-center fw-bold">{{'Postero-posterior radiography (PP)' | translate}}</h3>
</ng-template>
<ng-template [ngIf]="typeExploration === 'LAT'">
	<h3 class="text-center fw-bold">{{'Lateral radiography (LAT)' | translate}}</h3>
</ng-template>

<form>
	<div name="radiography" class="file-drop-zone" file-drop-zone [control]="controlRadiography">
		<label *ngIf="controlRadiography.size === 0" class="upload-input">
			<div class="col text-center">
				<i class="bi bi-upload" style="font-size: 1rem; color: black;"></i>
			</div>
			<div class="col text text-center">
				{{'Drag and Drop the image or click here' | translate}}
			</div>
			<input name="inputRadiography" class="image-input" type="file" tabindex="-1" multiple="" accept=".png"
					(change)="addRadiography($event)">
		</label>

		<ng-template #placeholder>
			<div class="overlayCustom">
				<div class="text-center">
					<i class="bi bi-upload" style="font-size: 1rem; color: black;"></i>
				</div>
				<div class="dragover-text">
					{{'Drop it here' | translate}}
				</div>
			</div>
		</ng-template>

		<div *ngIf="controlRadiography.value.length > 0">
			<div class="row align-items-center">
				<div>
					<div class="row img-controls">
						<p class="img-zoom">
							<input name="radiography" class="slider" type="range" min="0" max="300" value="{{zoom}}"
									(input)="changeZoom($event)">
							<span>
								<input name="radiography" type="number" min="0" max="300" value="{{zoom}}"
										(input)="changeZoom($event)">
								%
							</span>
						</p>
					</div>
					<div class="row">
						<span class="options">
							<span class="annotation-options">
								<i name="radiographyDialog" class="bi bi-brush" style="font-size: 1rem; color: black;"
									(click)="openDialogImage()"></i>
							</span>
							<span class="control-options">
								<i name="radiography" class="bi bi-arrow-clockwise" style="font-size: 1rem; color: black;"
									(click)="resetRadiography()"></i>
								<i class="bi bi-trash" style="font-size: 1rem; color: black;"
									(click)="controlRadiography.removeFile(controlRadiography.value[0])"></i>
							</span>
						</span>
						<div class="img-div">
							<div>
								<img *ngIf="controlRadiography.valid" id="img-radiography" class="img-fluid"
										[src]="uploadedFile | async">
								<div *ngIf="isLoadingRadiography" class="spinner-border text-dark" role="status">
									<span class="visually-hidden">{{'Loading' | translate}}...</span>
								</div>
							</div>
						</div>
					</div>
					<div class="row img-controls">
						<div class="img-brightness">
							<input name="radiography" class="slider" type="range" min="0" max="200" value="{{brightness}}"
									(input)="changeBrightness($event)">
							<span>
								<input name="radiography" type="number" min="0" max="200" value="{{brightness}}"
									(input)="changeBrightness($event)">
								%
							</span>
						</div>
						<div class="img-contrast">
							<input name="radiography" class="slider" type="range" min="0" max="200" value="{{contrast}}"
								(input)="changeContrast($event)">
							<span id="contrast-number">
								<input name="radiography" type="number" min="0" max="200" value="{{contrast}}"
									(input)="changeContrast($event)">
								%
							</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</form>

<app-locate-signs-in-image-dialog
	*ngIf="showImageDialog"
	(close)="closeDialogImage($event)"
	[src]="uploadedFile | async">
</app-locate-signs-in-image-dialog>
